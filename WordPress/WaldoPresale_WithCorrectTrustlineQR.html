<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WaldoCoin Presale</title>
  <style>
  body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #e63e3e;
  color: #e63e3e;
  margin: 0;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: auto;
  background: white;
  padding: 20px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  border-radius: 10px;
}

header, section, footer {
  padding: 20px;
  background-color: #070707;
  margin-bottom: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.05);
}

h1, h2 {
  color: #ffffff;
  text-align: center;
}

footer {
  text-align: center;
  font-size: 14px;
  color: #666;
}

/* üîç WALDO Presale Lookup Styling */
.waldo-presale-lookup {
  max-width: 400px;
  margin: 0 auto;
  padding: 20px;
  background: #000;
  border: 2px solid red;
  border-radius: 12px;
  box-shadow: 0 0 20px red;
  color: white;
}

.waldo-presale-lookup-title {
  text-align: center;
  margin-bottom: 20px;
}

.waldo-presale-lookup-input {
  display: block;
  margin: 0 auto 20px auto;
  width: 90%;
  max-width: 400px;
  padding: 12px;
  font-size: 18px;
  border-radius: 8px;
  border: none;
}

.waldo-presale-lookup-btn {
  display: block;
  margin: 0 auto;
  width: 100%;
  padding: 12px;
  font-size: 18px;
  background: red;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.waldo-presale-lookup-result {
  margin-top: 25px;
  text-align: left;
  color: #fff;
}

/* üîã Progress Meter */
.meter {
  height: 30px;
  background: #222;
  border: 2px solid #555;
  border-radius: 15px;
  overflow: hidden;
  margin: 15px auto;
  width: 80%;
  max-width: 600px;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ff003c, #ff8c00, #ffff00);
  transition: width 1.5s ease-in-out;
}

/* üìà Conversion Table */
.conversion-section {
  padding: 30px;
  background: #111;
  color: #fcfcfc;
  font-family: 'Inter', sans-serif;
}

.conversion-section h2 {
  margin: 0 0 10px;
  font-size: 1.5em;
  color: #e63e3e;
}

.conversion-scroll {
  overflow-x: auto;
}

.conversion-table {
  width: 100%;
  border-collapse: collapse;
  background: #222;
  color: white;
  margin-top: 10px;
}

.conversion-table th,
.conversion-table td {
  padding: 10px 14px;
  border: 1px solid #fcfbfb;
  text-align: left;
  white-space: nowrap;
  min-width: 140px;
}

.conversion-table th {
  background-color: #e63e3e;
  color: #fff;
}

.bonus {
  color: #ffe600;
  font-weight: bold;
  display: block;
  margin-top: 4px;
  font-size: 0.95em;
}

/* üì± Mobile Responsive */
@media (max-width: 600px) {
  .conversion-section h2 {
    font-size: 1.2em;
    padding-left: 16px;
  }

  .conversion-table th,
  .conversion-table td {
    font-size: 0.95em;
    min-width: 140px;
  }

  .bonus {
    font-size: 0.9em;
  }
}

/* üîó Telegram Link */
.telegram-link {
  color: #e63e3e;
  font-weight: bold;
  text-decoration: none;
}

.telegram-link:hover {
  text-decoration: underline;
}

/* üì∏ Trustline QR Code */
img[alt="WALDO Trustline QR"] {
  max-width: 250px;
  margin: 20px auto;
  display: block;
  border: 4px solid red;
  border-radius: 16px;
}

  </style>
</head>
<body>
  <header style="text-align: center; background: rgb(0, 0, 0); padding: 30px 20px; border-radius: 12px; margin-bottom: 20px;">
  <h1 style="font-size: 2em; margin-bottom: 10px;">üöÄ Welcome to the WaldoCoin Presale!</h1>
  <p style="font-size: 1.2em; color: #e63e3e;">
    <strong>Presale is LIVE!</strong> Use the WALDO Buy Widget on the homepage to participate instantly with your XUMM wallet.
  </p>
</header>

<section style="text-align: center; background: rgb(0, 0, 0); padding: 30px 20px; border-radius: 12px; margin-bottom: 20px;">
  <h2 style="font-size: 2em;">üî• WALDO SOLD: <span id="soldDisplay">0</span> / 75,000,000</h2>
  <div class="meter" style="margin: 20px auto;">
    <div id="progressBar" class="progress-bar"></div>
  </div>
</section>

  <div class="container">
      <div class="waldo-presale-lookup">
        <h2 class="waldo-presale-lookup-title">üîç WALDO Presale Lookup</h2>
        <input type="text" id="lookupWalletInput" placeholder="Enter XRPL Wallet (e.g. rXYZ...)" class="waldo-presale-lookup-input">
        <button type="button" onclick="lookupPresale()" class="waldo-presale-lookup-btn">üì¶ Check WALDO Allocation</button>
        <div id="lookupResult" class="waldo-presale-lookup-result"></div>
      </div>
    <section class="conversion-section">
      <h2>üìä XRP to WALDO Conversion Chart</h2>
      <h2>(How many WALDO you get)</h2>
      <div class="conversion-scroll">
        <table class="conversion-table">
          <thead>
            <tr><th>XRP</th><th>WaldoCoins</th></tr>
          </thead>
          <tbody>
            <tr><td>5 XRP</td><td>5,000 WALDO</td></tr>
            <tr><td>10 XRP</td><td>10,000 WALDO</td></tr>
            <tr><td>20 XRP</td><td>2,000,000 WALDO</td></tr>
            <tr><td>30 XRP</td><td>3,000,000 WALDO</td></tr>
            <tr><td>40 XRP</td><td>4,000,000 WALDO</td></tr>
            <tr><td>60 XRP</td><td>6,000,000 WALDO</td></tr>
            <tr><td>70 XRP</td><td>7,000,000 WALDO</td></tr>
            <tr><td>80 XRP</td><td>8,000,000 WALDO <span class="bonus">+ 2,000,000 Bonus = 10,000,000 Total</span></td></tr>
            <tr><td>90 XRP</td><td>9,000,000 WALDO <span class="bonus">+ 3,000,000 Bonus = 12,000,000 Total</span></td></tr>
            <tr><td>100 XRP</td><td>10,000,000 WALDO <span class="bonus">+ 5,000,000 Bonus = 15,000,000 Total</span></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <footer>
      <p>Need help? Email <strong>support@waldocoin.live</strong> or join our 
        <a href="https://t.me/WALDOCOINxrp" target="_blank" class="telegram-link">Telegram</a>
      </p>
      <section style="text-align:center; background:#111; color:#fff; padding:30px; border-radius:12px; margin-top:30px;">
        <h2 style="color:#ffe600;">üì≤ Add WALDO to Your Wallet</h2>
        <p>Scan this QR code to add the WALDO trustline to your XUMM wallet.</p>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=https://xrpl.services/?issuer=rstjAWDiqKsUMhHqiJShRSkuaZ44TXZyDY&currency=WLO&limit=1000000000" 
             alt="WALDO Trustline QR" style="max-width:250px; margin:20px auto; display:block; border:4px solid red; border-radius:16px;">
        <p style="margin-top:10px;">
          WALDO Token Issuer:<br>
          <code>rstjAWDiqKsUMhHqiJShRSkuaZ44TXZyDY</code>
        </p>
      </section>
    </footer>
  </div>

  <script>
    const baseURL = "https://waldocoin-backend-api.onrender.com";
    const hardCap = 75000000;
    const endDate = new Date("2025-06-01T00:00:00Z");

    function startCountdownLoop() {
      const countdownTarget = endDate.getTime();
      const el = document.getElementById("countdown");
      setInterval(() => {
        const now = new Date().getTime();
        const diff = countdownTarget - now;
        if (diff <= 0) {
          el.textContent = "PRESALE ENDED";
          return;
        }
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);
        el.textContent = `${String(d).padStart(2, '0')}:${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
      }, 1000);
    }

    async function lookupPresale() {
      const wallet = document.getElementById("lookupWalletInput").value.trim();
      const resultDiv = document.getElementById("lookupResult");
      resultDiv.innerHTML = "‚è≥ Checking...";
      try {
        const res = await fetch(`${baseURL}/api/presale/lookup?wallet=${wallet}`);
        const data = await res.json();
        if (data.error) {
          resultDiv.innerHTML = `<p style="color: orange;">‚ö†Ô∏è ${data.error}</p>`;
        } else {
          resultDiv.innerHTML = `
            <p><strong>Wallet:</strong> ${data.wallet}</p>
            <p><strong>Amount Sent:</strong> ${data.amount} XRP</p>
            <p><strong>WALDO Tokens:</strong> ${data.tokens.toLocaleString()} WALDO</p>
            <p><strong>Bonus Tier:</strong> ${data.bonusTier || 'None'}</p>
            <p><strong>Time:</strong> ${new Date(data.timestamp).toLocaleString()}</p>
          `;
        }
      } catch (err) {
        resultDiv.innerHTML = `<p style="color:red;">‚ùå Error fetching data.</p>`;
      }
    }

    function updateMeter(sold, max) {
      const percent = (sold / max) * 100;
      document.getElementById("progressBar").style.width = percent + "%";
      document.getElementById("soldDisplay").textContent = sold.toLocaleString();

    }

    document.addEventListener("DOMContentLoaded", () => {
      fetch(`${baseURL}/api/presale/total-sold`)
        .then(res => res.json())
        .then(data => updateMeter(data.sold, hardCap));

      setInterval(() => {
        fetch(`${baseURL}/api/presale/total-sold`)
          .then(res => res.json())
          .then(data => updateMeter(data.sold, hardCap));
      }, 60000);
    });
  </script>
</body>
</html>
