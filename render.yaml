services:
  # === WALDO Twitter Bot Worker ===
  - type: worker
    name: waldo-twitter-bot
    runtime: python
    rootDir: waldocoin-backend/waldo-twitter-bot
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python main.py"
    envVars:
      - key: PYTHON_VERSION
        value: 3.10
      - key: TWITTER_BEARER_TOKEN
        sync: false
      - key: TWITTER_API_KEY
        sync: false
      - key: TWITTER_API_SECRET
        sync: false
      - key: TWITTER_ACCESS_TOKEN
        sync: false
      - key: TWITTER_ACCESS_SECRET
        sync: false
      - key: XRPL_NODE
        sync: false
      - key: WALDO_ISSUER
        sync: false
      - key: STAKING_VAULT_WALLET
        sync: false
      - key: DISTRIBUTOR_SECRET
        sync: false
      - key: DISTRIBUTOR_WALLET
        sync: false
      - key: X_ADMIN_KEY
        sync: false

  # === WALDO Backend API ===
  - type: web
    name: waldo-api
    runtime: node
    rootDir: waldocoin-backend
    buildCommand: "npm install"
    startCommand: "node server.js"
    envVars:
      - key: XUMM_API_KEY
        sync: false
      - key: XUMM_API_SECRET
        sync: false
      - key: REDIS_URL
        sync: false
      - key: WALDO_ISSUER
        sync: false
      - key: WALDO_CURRENCY
        sync: false
      - key: STAKING_VAULT_WALLET
        sync: false
      - key: PORT
        value: 4000
      - key: XRPL_NODE
        sync: false
      - key: DISTRIBUTOR_WALLET
        sync: false
      - key: DISTRIBUTOR_SECRET
        sync: false
      - key: NFT_STORAGE_API_KEY
        sync: false
      - key: BOT_TOKEN
        sync: false
      - key: XRPL_ENDPOINT
        sync: false
      - key: X_ADMIN_KEY
        sync: false
      - key: AI_CONTENT_VERIFICATION_ENABLED
        value: false
      # AI API Keys - DISABLED to avoid costs (system uses free text analysis)
      # - key: OPENAI_API_KEY
      #   sync: false
      # - key: GOOGLE_VISION_API_KEY
      #   sync: false
      # - key: TINEYE_API_KEY
      #   sync: false
      - key: AI_CONFIDENCE_THRESHOLD
        value: 70
      # Twitter API Integration
      - key: TWITTER_BEARER_TOKEN
        sync: false
      - key: TWITTER_API_KEY
        sync: false
      - key: TWITTER_API_SECRET
        sync: false
      - key: TWITTER_ACCESS_TOKEN
        sync: false
      - key: TWITTER_ACCESS_SECRET
        sync: false
      # XRPL Configuration (matching code usage)
      - key: WALDO_ISSUER
        sync: false
      - key: WALDO_CURRENCY
        value: WLO
      - key: WALDOCOIN_TOKEN
        value: WLO
      - key: WALDO_DISTRIBUTOR_SECRET
        sync: false
      # NFT Minting Configuration
      - key: MINTING_WALLET_SECRET
        sync: false
      # Additional environment variables used in code
      - key: NFT_STORAGE_API_KEY
        sync: false

  # === WALDO Trading Bot Worker ===
  - type: worker
    name: waldo-trading-bot
    runtime: node
    rootDir: waldo-trading-bot
    buildCommand: "npm install"
    startCommand: "node bot.js"
    envVars:
      # Telegram Configuration
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: TELEGRAM_CHANNEL_ID
        value: "@waldocoin"
      - key: TELEGRAM_ADMIN_ID
        sync: false
      - key: PERSONAL_ACCOUNT_MODE
        value: true
      - key: STEALTH_MODE
        value: true
      # XRPL Configuration
      - key: XRPL_NODE
        sync: false
      - key: TRADING_WALLET_SECRET
        sync: false
      - key: WALDO_ISSUER
        sync: false
      - key: WALDO_CURRENCY
        value: WLO
      # Trading Parameters
      - key: MIN_TRADE_AMOUNT_XRP
        value: 0.5
      - key: MAX_TRADE_AMOUNT_XRP
        value: 2.0
      - key: PRICE_SPREAD_PERCENTAGE
        value: 0
      - key: MARKET_MAKING_ENABLED
        value: true
      - key: AUTO_TRADE_INTERVAL
        value: 3
      # Profit Management
      - key: PROFIT_TRACKING_ENABLED
        value: true
      - key: STARTING_BALANCE_XRP
        value: 70
      - key: PROFIT_RESERVE_THRESHOLD
        value: 200
      - key: PROFIT_RESERVE_PERCENTAGE
        value: 50
      # Safety Limits
      - key: MAX_DAILY_VOLUME_XRP
        value: 500
      - key: EMERGENCY_STOP
        value: false
      # Redis Connection
      - key: REDIS_URL
        sync: false
      # Logging
      - key: LOG_LEVEL
        value: info
  
  - type: worker
    name: waldo-autodistribute
    runtime: node
    rootDir: waldocoin-backend
    buildCommand: "npm install"
    startCommand: node autodistribute.js
    envVars:
      - key: XRPL_NODE
        sync: false
      - key: WALDO_ISSUER
        sync: false
      - key: WALDO_CURRENCY
        sync: false
      - key: WALDOCOIN_TOKEN
        sync: false
      - key: STAKING_VAULT_WALLET
        sync: false
      - key: DISTRIBUTOR_WALLET
        sync: false
      - key: DISTRIBUTOR_SECRET
        sync: false
      - key: WALDO_DISTRIBUTOR_SECRET
        sync: false
      - key: WALDO_SENDER_SECRET
        sync: false
      - key: ISSUER_SECRET
        sync: false
      - key: ISSUER_WALLET
        sync: false
      - key: REDIS_URL
        sync: false
      - key: X_ADMIN_KEY
        sync: false



